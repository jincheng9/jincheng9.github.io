<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ChatGPT最佳实践系列第5篇-使用外部工具 - Jincheng9&#39;s blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="jincheng9" /><meta name="description" content="ChatGPT最佳实践系列第5篇-使用外部工具" /><meta name="keywords" content="chatgpt" />






<meta name="generator" content="Hugo 0.84.4 with theme even" />


<link rel="canonical" href="http://jincheng9.github.io/post/chatgpt-13/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="ChatGPT最佳实践系列第5篇-使用外部工具" />
<meta property="og:description" content="ChatGPT最佳实践系列第5篇-使用外部工具" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://jincheng9.github.io/post/chatgpt-13/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-09-29T21:34:50+08:00" />
<meta property="article:modified_time" content="2023-09-29T21:34:50+08:00" />

<meta itemprop="name" content="ChatGPT最佳实践系列第5篇-使用外部工具">
<meta itemprop="description" content="ChatGPT最佳实践系列第5篇-使用外部工具"><meta itemprop="datePublished" content="2023-09-29T21:34:50+08:00" />
<meta itemprop="dateModified" content="2023-09-29T21:34:50+08:00" />
<meta itemprop="wordCount" content="1760">
<meta itemprop="keywords" content="chatgpt," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ChatGPT最佳实践系列第5篇-使用外部工具"/>
<meta name="twitter:description" content="ChatGPT最佳实践系列第5篇-使用外部工具"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">无忌</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">全部文章</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">无忌</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">全部文章</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ChatGPT最佳实践系列第5篇-使用外部工具</h1>

      <div class="post-meta">
        <span class="post-time"> 2023-09-29 </span>
        <div class="post-category">
            <a href="/categories/chatgpt/"> chatgpt </a>
            </div>
          <span class="more-meta"> 1760 words </span>
          <span class="more-meta"> 4 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#背景">背景</a></li>
        <li><a href="#策略1使用向量搜索来实现高效知识检索">策略1：使用向量搜索来实现高效知识检索</a></li>
        <li><a href="#策略2让大模型写代码来实现精确计算">策略2：让大模型写代码来实现精确计算</a></li>
        <li><a href="#策略3使用大模型的函数调用功能">策略3：使用大模型的函数调用功能</a></li>
        <li><a href="#总结">总结</a></li>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><img src="/img/wechat.png" alt=""></p>
<h2 id="背景">背景</h2>
<p>OpenAI官方详细介绍了ChatGPT使用的最佳实践，不仅适用于使用ChatGPT网站进行直接对话的用户，还适用于通过OpenAI API接入的开发者。</p>
<p>掌握了这些最佳实践，就能更好地利用GPT大模型。</p>
<p>本文是ChatGPT使用最佳实践系列第5篇 - 使用外部工具。</p>
<h2 id="策略1使用向量搜索来实现高效知识检索">策略1：使用向量搜索来实现高效知识检索</h2>
<p>用户提问的时候，如果能拿到和问题有关的信息，是有助于大模型提升回答效果的。</p>
<p>比如用户在针对某部电影做提问的时候，如果你能把电影的演员、导演、剧情等信息也一起作为prompt给到大模型，那大模型的回答效果会更好。</p>
<p>而且这一招也能解决时效性的问题，因为可以针对用户的提问实时检索最新信息，然后一起作为prompt喂给大模型。</p>
<p>比如Google的Bard和Baichuan就引入了搜索增强来解决时效性问题。</p>
<p>要实现上面说的高效检索，就可以用到向量检索的技术。</p>
<p>向量检索是把输入的文本转化成一个vector向量，然后基于向量之间的相似度衡量就可以找到相似的文本数据。</p>
<p>现在基于大模型做知识库助手，就是使用向量检索到方案来实现的。</p>
<p>具体用例可以参考：<a href="https://github.com/openai/openai-cookbook/blob/main/examples/vector_databases/Using_vector_databases_for_embeddings_search.ipynb">OpenAI Cookbook</a>。</p>
<h2 id="策略2让大模型写代码来实现精确计算">策略2：让大模型写代码来实现精确计算</h2>
<p>让GPT直接做精确的数值计算或者逻辑很复杂的计算是不靠谱的。</p>
<p>但是，我们可以让GPT编写计算代码，然后我们自己本地运行GPT生成的代码来实现精确的计算。</p>
<p>比如下面的例子，你可以让通过system消息让大模型编写代码，把代码按照你预期的格式输出。然后你可以针对这个格式来解析大模型的输出代码，最后在你的运行环境执行代码，拿到计算结果。</p>
<table>
<thead>
<tr>
<th>System</th>
<th>You can write and execute Python code by enclosing it in triple backticks, e.g. <br>```code goes here```.<br> Use this to perform calculations.</th>
</tr>
</thead>
<tbody>
<tr>
<td>user</td>
<td>Find all real-valued roots of the following polynomial: 3*x**5 - 5*x**4 - 3*x**3 - 7*x - 10.</td>
</tr>
<tr>
<td>assistant</td>
<td>To find the roots of the polynomial, we can use the <code>numpy.roots</code> function in Python. This function computes the roots of a polynomial with coefficients given in a list. The list represents the coefficients of the polynomial from highest degree to lowest.<br/><br/>Here is the Python code to find the roots of the polynomial:<br/><br/>```python<br/>import numpy as np<br/><br/># Coefficients of the polynomial<br/>coeff = [3, -5, -3, 0, -7, -10]<br/><br/># Compute the roots<br/>roots = np.roots(coeff)<br/><br/># Print only real roots<br/>real_roots = [root for root in roots if np.isreal(root)]<br/>print(real_roots)<br/>```<br/>Please note that the roots may not be exact due to numerical precision issues. Also, the roots are not guaranteed to be real; they could be complex numbers. The code above filters out only the real roots.</td>
</tr>
<tr>
<td>user</td>
<td>run the code above, and output the result</td>
</tr>
<tr>
<td>assistant</td>
<td>I&rsquo;m sorry for the confusion, but as a text-based AI, I don&rsquo;t have the ability to execute Python code. However, you can run the code provided in your local Python environment or any online Python compiler to get the real-valued roots of the polynomial.</td>
</tr>
</tbody>
</table>
<p>大模型是无法直接运行代码的，需要在你本地环境运行。</p>
<p>可以在这个链接地址进行体验：<a href="https://platform.openai.com/playground/p/default-code-execution">Open in Playground</a>。</p>
<p>如果你希望大模型编写的代码调用某个指定的API，那可以提供这个API的说明或者代码样例，教会大模型如何使用这个API，代码示例如下：</p>
<table>
<thead>
<tr>
<th>system</th>
<th>You can write and execute Python code by enclosing it in triple backticks. Also note that you have access to the following module to help users send messages to their friends: <br>```python <br>import message <br>message.write(to=&ldquo;John&rdquo;, message=&ldquo;Hey, want to meetup after work?&quot;)<br>```</th>
</tr>
</thead>
<tbody>
<tr>
<td>user</td>
<td>Let Alice know I&rsquo;ll meet her at the coffee shop at 10.</td>
</tr>
<tr>
<td>assistant</td>
<td>Sure, I can help you with that. Here is the Python code to send the message to Alice.<br/><br/>```python<br/>import message<br/>message.write(to=&ldquo;Alice&rdquo;, message=&ldquo;I&rsquo;ll meet you at the coffee shop at 10.&quot;)<br/>```</td>
</tr>
</tbody>
</table>
<p>可以在这个链接地址进行体验：<a href="https://platform.openai.com/playground/p/default-code-api">Open in Playground</a>。</p>
<p>注意：在你本地环境执行大模型生成的代码要小心，不要想当然认为大模型生成的代码就是安全可靠的。最好在一个沙箱环境里运行大模型生成的代码，避免引入安全漏洞。</p>
<h2 id="策略3使用大模型的函数调用功能">策略3：使用大模型的函数调用功能</h2>
<p>Chat completions这个API允许在请求里传入函数定义，大模型可以根据用户提问来判断是否需要调用你传入的函数以及生成对应函数的实参，并且返回给用户，这个功能其实就是function call。</p>
<p>function call非常实用，可以针对准确性要求比较高的场景生成尽可能精确的回答。</p>
<p>比如，你问大模型今天深圳的气温是多少，GPT肯定是无法知晓的，因为它的训练数据只截止到2021年9月。</p>
<p>针对这种场景，你可以写一个function，参数是日期和城市，输出结果是气温。</p>
<p>你把这个function的定义传给作为参数传给GPT，GPT会根据你的提问来判断是否需要调用到你提供的function。</p>
<p>如果GPT认为需要调用到你的function才能回答提问的话，会把这个function的实参返回给你，并且告诉你具体要调用哪个的function。</p>
<p>更多细节可以参考我之前写的文章：<a href="https://mp.weixin.qq.com/s?__biz=Mzg2MTcwNjc1Mg==&amp;mid=2247484810&amp;idx=1&amp;sn=9583a27435c000865544991e0c4801c7&amp;chksm=ce124ae5f965c3f322a847fcc5e89afe819f617d4ea77f1d54434d89cbf43f47e20139674dd1&amp;token=1738602078&amp;lang=zh_CN#rd">GPT函数调用教程</a>。</p>
<h2 id="总结">总结</h2>
<p>本文是ChatGPT使用最佳实践系列第5篇 - 使用外部工具。</p>
<p>详细讲述了3个策略，以上策略不仅适用于GPT模型，还适用于其它大语言模型。</p>
<p>文章和示例代码开源在GitHub: <a href="https://github.com/jincheng9/gpt-tutorial">GPT实战教程</a>，可以看到所有主流的开源LLM。</p>
<p>公众号：coding进阶。关注公众号可以获取最新GPT实战内容。</p>
<p>个人网站：<a href="https://jincheng9.github.io/">Jincheng&rsquo;s Blog</a>。</p>
<p>知乎：<a href="https://www.zhihu.com/people/thucuhkwuji">无忌</a>。</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://platform.openai.com/docs/guides/gpt-best-practices">https://platform.openai.com/docs/guides/gpt-best-practices</a></li>
</ul>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/chatgpt/">chatgpt</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/chatgpt-14/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">ChatGPT最佳实践系列第6篇-系统化测试</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/chatgpt-12/">
            <span class="next-text nav-default">ChatGPT最佳实践系列第4篇-给GPT思考的时间</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="jincheng9/jincheng9.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/jincheng9/" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/thucuhkwuji" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="http://jincheng9.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2017 - 
    2023<span class="heart"><i class="iconfont icon-heart"></i></span><span>Jincheng9</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script><script></script><script src="https://cdn.jsdelivr.net/npm/raphael@2.2.7/raphael.min.js" integrity="sha256-67By+NpOtm9ka1R6xpUefeGOY8kWWHHRAKlvaTJ7ONI=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/flowchart.js@1.8.0/release/flowchart.min.js" integrity="sha256-zNGWjubXoY6rb5MnmpBNefO0RgoVYfle9p0tvOQM+6k=" crossorigin="anonymous"></script><script></script><script src="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js" integrity="sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/snapsvg@0.5.1/dist/snap.svg-min.js" integrity="sha256-oI+elz+sIm+jpn8F/qEspKoKveTc5uKeFHNNVexe6d8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/underscore@1.8.3/underscore-min.js" integrity="sha256-obZACiHd7gkOk9iIL/pimWMTJ4W/pBsKu+oZnSeBIek=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.js" integrity="sha384-8748Vn52gHJYJI0XEuPB2QlPVNUkJlJn9tHqKec6J3q2r9l8fvRxrgn/E5ZHV0sP" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.css" integrity="sha384-6QbLKJMz5dS3adWSeINZe74uSydBGFbnzaAYmp+tKyq60S7H2p6V7g1TysM5lAaF" crossorigin="anonymous">



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>








</body>
</html>
